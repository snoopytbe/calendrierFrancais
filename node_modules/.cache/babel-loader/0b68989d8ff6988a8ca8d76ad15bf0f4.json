{"ast":null,"code":"var _jsxFileName = \"/Users/matthieuandre/Code/calendrier/calendrierFrancais/src/Calendrier.js\",\n    _s = $RefreshSig$();\n\nimport React from 'react';\nimport Table from '@mui/material/Table';\nimport TableBody from '@mui/material/TableBody';\nimport TableContainer from '@mui/material/TableContainer';\nimport TableRow from '@mui/material/TableRow';\nimport TableCell from '@mui/material/TableCell';\nimport Paper from '@mui/material/Paper';\nimport Menu from '@mui/material/Menu';\nimport Divider from '@mui/material/Divider';\nimport MenuItem from '@mui/material/MenuItem';\nimport Typography from '@mui/material/Typography';\nimport moment from 'moment';\nimport { extendMoment } from 'moment-range';\nmoment = extendMoment(moment);\nimport 'moment/min/locales.min';\nimport { estVacances } from './vacances';\nimport { getApiData } from './ApiData';\nimport * as StyleTableCell from './styleTableCell';\nimport TableCellCalendrier from './TableCellCalendrier';\nimport { handleNewConge, compteCongesAnnee, calculeSoldeCongesAtDate } from './conges';\nimport DateRangeDialog from './DateRangeDialog';\nimport Fab from '@mui/material/Fab';\nimport NavigateBeforeIcon from '@mui/icons-material/NavigateBefore';\nimport NavigateNextIcon from '@mui/icons-material/NavigateNext';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nmoment.locale('fr-FR');\nexport default function Calendrier(props) {\n  _s();\n\n  const {\n    annee\n  } = props;\n  const [mousePos, setMousePos] = React.useState({\n    mouseX: null,\n    mouseY: null\n  });\n  const [activeMenu, setActiveMenu] = React.useState(false);\n  const [lignes, setLignes] = React.useState([]);\n  const [highlighted, setHighlighted] = React.useState(null);\n  const [conges, setConges] = React.useState([]);\n  const [clicked, setClicked] = React.useState(false);\n  const [startDateHighlight, setStartDateHighlight] = React.useState(null);\n  const [openDialog, setOpenDialog] = React.useState(false);\n  const [nbMonths, setNbMonths] = React.useState(Math.floor(window.innerWidth / 117));\n  const [dateDebut, setDateDebut] = React.useState(moment([annee, 0, 1]));\n  const [dateFin, setDateFin] = React.useState(moment([annee, 6, 1]));\n  React.useEffect(() => {\n    const handleWindowResize = () => {\n      var newNbMonths = Math.floor(window.innerWidth / 117);\n      var newDateFin = dateDebut.clone().add(Math.max(newNbMonths !== null && newNbMonths !== void 0 ? newNbMonths : 6, 2), 'months');\n      setNbMonths(newNbMonths);\n      setDateFin(newDateFin);\n    };\n\n    handleWindowResize();\n    window.addEventListener('resize', handleWindowResize);\n    return () => window.removeEventListener('resize', handleWindowResize);\n  }, []);\n  const zone = 'C';\n  const MenuOptions = [{\n    menu: 'Congés',\n    abr: 'CA',\n    type: 'conge'\n  }, {\n    menu: 'RTT',\n    abr: 'RTT',\n    type: 'conge'\n  }, {\n    menu: 'Formation',\n    abr: 'FOR',\n    type: 'conge'\n  }, {\n    menu: 'Maladie',\n    abr: 'MAL',\n    type: 'conge'\n  }, {\n    menu: 'Présent',\n    abr: '',\n    type: 'conge'\n  }, {\n    menu: 'Télétravail',\n    abr: 'TL',\n    type: 'conge'\n  }, {\n    menu: 'Divider',\n    abr: '',\n    type: 'separateur'\n  }, {\n    menu: 'Journée',\n    abr: 'J',\n    type: 'temps'\n  }, {\n    menu: 'Matin',\n    abr: 'AM',\n    type: 'temps'\n  }, {\n    menu: 'Après-midi',\n    abr: 'PM',\n    type: 'temps'\n  }];\n\n  const handleDescrClose = () => {\n    setActiveMenu(false);\n  };\n\n  const onClick = React.useCallback((event, myDate) => {\n    event.preventDefault();\n\n    if (!clicked) {\n      setStartDateHighlight(myDate);\n      setHighlighted(moment.range(myDate, myDate));\n    } else {\n      setHighlighted(moment.range(moment.min(startDateHighlight, myDate), moment.max(startDateHighlight, myDate)));\n      setMousePos({\n        mouseX: event.clientX - 2,\n        mouseY: event.clientY - 4\n      });\n      setActiveMenu(true);\n    }\n\n    setClicked(!clicked);\n  }, [clicked]);\n\n  function onContextMenu(event) {\n    event.preventDefault();\n    setMousePos({\n      mouseX: event.clientX - 2,\n      mouseY: event.clientY - 4\n    });\n    setActiveMenu(true);\n  }\n\n  const handleMenuItemClick = (event, abr, type) => {\n    event.preventDefault(); //console.log(highlighted);\n\n    var newConges = handleNewConge(abr, type, conges, highlighted);\n    setConges(newConges);\n    setActiveMenu(false);\n    setHighlighted(null);\n  };\n\n  function getLignes(index) {\n    const result = [];\n    Array.from(moment.range(dateDebut, dateDebut.clone().add(nbMonths, 'months')).by('month')).map(month => {\n      let myDate = moment([month.year(), month.month(), index + 1]);\n      let isValidDate = myDate.isValid();\n\n      function CommonTableCellCalendrier(params) {\n        return /*#__PURE__*/_jsxDEV(TableCellCalendrier, {\n          myDate: myDate,\n          highlighted: highlighted,\n          onContextMenu: onContextMenu,\n          onClick: onClick,\n          clicked: clicked,\n          conges: conges,\n          ...params\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 153,\n          columnNumber: 11\n        }, this);\n      }\n\n      function tableCellConge() {\n        let conge = conges === null || conges === void 0 ? void 0 : conges.find(item => item.date === myDate.format('YYYY-MM-DD'));\n\n        if (!conge) {\n          return /*#__PURE__*/_jsxDEV(CommonTableCellCalendrier, {\n            colSpan: 2,\n            type: \"sansConge\",\n            duree: \"J\",\n            abr: conge === null || conge === void 0 ? void 0 : conge.abr\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 172,\n            columnNumber: 13\n          }, this);\n        }\n\n        if (conge.duree === 'J') return /*#__PURE__*/_jsxDEV(CommonTableCellCalendrier, {\n          colSpan: 2,\n          type: \"journeeConge\",\n          duree: \"J\",\n          abr: conge === null || conge === void 0 ? void 0 : conge.abr,\n          children: conge === null || conge === void 0 ? void 0 : conge.abr\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 183,\n          columnNumber: 13\n        }, this);else return /*#__PURE__*/_jsxDEV(_Fragment, {\n          children: [/*#__PURE__*/_jsxDEV(CommonTableCellCalendrier, {\n            type: conge.duree === 'AM' ? 'demiJourneeConge' : 'demiJourneeSansConge',\n            duree: \"AM\",\n            abr: conge === null || conge === void 0 ? void 0 : conge.abr,\n            children: conge.duree === 'AM' && conge.abr\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 194,\n            columnNumber: 15\n          }, this), /*#__PURE__*/_jsxDEV(CommonTableCellCalendrier, {\n            type: conge.duree === 'PM' ? 'demiJourneeConge' : 'demiJourneeSansConge',\n            duree: \"PM\",\n            abr: conge === null || conge === void 0 ? void 0 : conge.abr,\n            children: conge.duree === 'PM' && conge.abr\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 205,\n            columnNumber: 15\n          }, this)]\n        }, void 0, true);\n      }\n\n      result.push(\n      /*#__PURE__*/\n      // Numéro du jour\n      _jsxDEV(React.Fragment, {\n        children: [/*#__PURE__*/_jsxDEV(CommonTableCellCalendrier, {\n          type: \"date\",\n          children: isValidDate && myDate.format('DD') + ' ' + myDate.format('dd')[0].toUpperCase()\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 224,\n          columnNumber: 11\n        }, this), tableCellConge(), /*#__PURE__*/_jsxDEV(TableCell, {\n          sx: { ...(isValidDate ? estVacances(myDate, zone) ? StyleTableCell.maZone : estVacances(myDate, 'A') || estVacances(myDate, 'B') ? StyleTableCell.autresZones : StyleTableCell.vacances : StyleTableCell.vacances)\n          }\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 235,\n          columnNumber: 11\n        }, this)]\n      }, 'ligne' + index + 'i' + month.year() + month.month(), true, {\n        fileName: _jsxFileName,\n        lineNumber: 221,\n        columnNumber: 9\n      }, this));\n    });\n    return result;\n  }\n\n  React.useEffect(() => {\n    let newLigne = [];\n\n    for (let i = 0; i < 31; i++) newLigne = [...newLigne, /*#__PURE__*/_jsxDEV(TableRow, {\n      children: getLignes(i)\n    }, 'ligne' + i, false, {\n      fileName: _jsxFileName,\n      lineNumber: 258,\n      columnNumber: 9\n    }, this)];\n\n    setLignes(newLigne);\n  }, [clicked, conges, dateDebut, nbMonths]);\n  React.useEffect(() => {\n    getApiData().then(data => setConges(data));\n  }, []);\n\n  function NbMonthByYear(oneRange, year) {\n    //console.log('NbMonthByYear');\n    //console.log(JSON.stringify(oneRange));\n    //console.log(year);\n    var rangeFullYear = moment.range(moment([year, 0, 1]), moment([year, 11, 31])); //console.log(JSON.stringify(rangeFullYear));\n\n    var result = 0;\n    var rangeYear = rangeFullYear.intersect(oneRange); //console.log(JSON.stringify(rangeYear));\n    //console.log(rangeFullYear.adjacent(oneRange));\n\n    if (!rangeYear) result = rangeFullYear.adjacent(oneRange) && 1;else result = Array.from(rangeYear.by('month')).length; //console.log(result);\n\n    return result;\n  }\n\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    children: [/*#__PURE__*/_jsxDEV(Typography, {\n      variant: \"h5\",\n      align: \"center\",\n      children: \"Cong\\xE9s\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"br\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 292,\n      columnNumber: 66\n    }, this), /*#__PURE__*/_jsxDEV(Fab, {\n      color: \"primary\",\n      size: \"small\",\n      sx: {\n        position: 'absolute',\n        top: 5,\n        left: 5\n      },\n      onClick: () => {\n        setDateDebut(dateDebut.clone().add(-1, 'months'));\n      },\n      children: /*#__PURE__*/_jsxDEV(NavigateBeforeIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 305,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 293,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Fab, {\n      color: \"primary\",\n      size: \"small\",\n      sx: {\n        position: 'absolute',\n        top: 5,\n        right: 5\n      },\n      onClick: () => {\n        setDateDebut(dateDebut.clone().add(1, 'months'));\n      },\n      children: /*#__PURE__*/_jsxDEV(NavigateNextIcon, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 319,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 307,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(TableContainer, {\n      component: Paper,\n      style: {\n        width: 'fit-content'\n      },\n      children: /*#__PURE__*/_jsxDEV(Table, {\n        style: {\n          borderCollapse: 'separate'\n        },\n        children: /*#__PURE__*/_jsxDEV(TableBody, {\n          children: [/*#__PURE__*/_jsxDEV(TableRow, {\n            children: Array.from(moment.range(dateDebut, dateDebut.clone().add(nbMonths, 'months')).snapTo('year').by('year')).map(years => /*#__PURE__*/_jsxDEV(React.Fragment, {\n              children: /*#__PURE__*/_jsxDEV(TableCell, {\n                sx: { ...StyleTableCell.annee\n                },\n                colSpan: 4 * NbMonthByYear(moment.range(dateDebut, dateDebut.clone().add(nbMonths, 'months')), years.year()),\n                onClick: () => setOpenDialog(true),\n                children: years.format('YYYY')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 332,\n                columnNumber: 19\n              }, this)\n            }, years.format('YYYY'), false, {\n              fileName: _jsxFileName,\n              lineNumber: 331,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 324,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(TableRow, {\n            children: Array.from(moment.range(dateDebut, dateDebut.clone().add(nbMonths, 'months')).by('month')).map(month => /*#__PURE__*/_jsxDEV(React.Fragment, {\n              children: /*#__PURE__*/_jsxDEV(TableCell, {\n                sx: { ...StyleTableCell.mois\n                },\n                colSpan: 4,\n                children: month.locale('fr-FR').format('MMMM')\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 358,\n                columnNumber: 19\n              }, this)\n            }, month.format('YYYY-M'), false, {\n              fileName: _jsxFileName,\n              lineNumber: 357,\n              columnNumber: 17\n            }, this))\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 351,\n            columnNumber: 13\n          }, this), lignes]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 323,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 322,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 321,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Menu, {\n      keepMounted: true,\n      open: activeMenu,\n      onClose: handleDescrClose,\n      anchorReference: \"anchorPosition\",\n      anchorPosition: mousePos.mouseY !== null && mousePos.mouseX !== null ? {\n        top: mousePos.mouseY,\n        left: mousePos.mouseX\n      } : undefined,\n      children: MenuOptions.map(option => {\n        var result;\n        if (option.menu === 'Divider') result = /*#__PURE__*/_jsxDEV(Divider, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 381,\n          columnNumber: 51\n        }, this);else result = /*#__PURE__*/_jsxDEV(MenuItem, {\n          sx: {\n            fontSize: '0.8em',\n            lineHeight: '1'\n          },\n          onClick: event => handleMenuItemClick(event, option.abr, option.type),\n          children: option.menu\n        }, option.menu, false, {\n          fileName: _jsxFileName,\n          lineNumber: 384,\n          columnNumber: 15\n        }, this);\n        return result;\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 368,\n      columnNumber: 7\n    }, this), openDialog && /*#__PURE__*/_jsxDEV(DateRangeDialog, {\n      dateDebut: dateDebut,\n      handleClose: (result, dateMin) => {\n        setOpenDialog(false);\n\n        if (result) {\n          setDateDebut(dateMin);\n        }\n      }\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 398,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 291,\n    columnNumber: 5\n  }, this);\n}\n\n_s(Calendrier, \"tYKtk/WTyTFo5md21FGs6n9EXBw=\");\n\n_c = Calendrier;\n\nvar _c;\n\n$RefreshReg$(_c, \"Calendrier\");","map":{"version":3,"sources":["/Users/matthieuandre/Code/calendrier/calendrierFrancais/src/Calendrier.js"],"names":["React","Table","TableBody","TableContainer","TableRow","TableCell","Paper","Menu","Divider","MenuItem","Typography","moment","extendMoment","estVacances","getApiData","StyleTableCell","TableCellCalendrier","handleNewConge","compteCongesAnnee","calculeSoldeCongesAtDate","DateRangeDialog","Fab","NavigateBeforeIcon","NavigateNextIcon","locale","Calendrier","props","annee","mousePos","setMousePos","useState","mouseX","mouseY","activeMenu","setActiveMenu","lignes","setLignes","highlighted","setHighlighted","conges","setConges","clicked","setClicked","startDateHighlight","setStartDateHighlight","openDialog","setOpenDialog","nbMonths","setNbMonths","Math","floor","window","innerWidth","dateDebut","setDateDebut","dateFin","setDateFin","useEffect","handleWindowResize","newNbMonths","newDateFin","clone","add","max","addEventListener","removeEventListener","zone","MenuOptions","menu","abr","type","handleDescrClose","onClick","useCallback","event","myDate","preventDefault","range","min","clientX","clientY","onContextMenu","handleMenuItemClick","newConges","getLignes","index","result","Array","from","by","map","month","year","isValidDate","isValid","CommonTableCellCalendrier","params","tableCellConge","conge","find","item","date","format","duree","push","toUpperCase","maZone","autresZones","vacances","newLigne","i","then","data","NbMonthByYear","oneRange","rangeFullYear","rangeYear","intersect","adjacent","length","position","top","left","right","width","borderCollapse","snapTo","years","mois","undefined","option","fontSize","lineHeight","dateMin"],"mappings":"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","sourcesContent":["import React from 'react';\r\nimport Table from '@mui/material/Table';\r\nimport TableBody from '@mui/material/TableBody';\r\nimport TableContainer from '@mui/material/TableContainer';\r\nimport TableRow from '@mui/material/TableRow';\r\nimport TableCell from '@mui/material/TableCell';\r\nimport Paper from '@mui/material/Paper';\r\nimport Menu from '@mui/material/Menu';\r\nimport Divider from '@mui/material/Divider';\r\nimport MenuItem from '@mui/material/MenuItem';\r\nimport Typography from '@mui/material/Typography';\r\nimport moment from 'moment';\r\nimport { extendMoment } from 'moment-range';\r\nmoment = extendMoment(moment);\r\nimport 'moment/min/locales.min';\r\nimport { estVacances } from './vacances';\r\nimport { getApiData } from './ApiData';\r\nimport * as StyleTableCell from './styleTableCell';\r\nimport TableCellCalendrier from './TableCellCalendrier';\r\nimport {\r\n  handleNewConge,\r\n  compteCongesAnnee,\r\n  calculeSoldeCongesAtDate,\r\n} from './conges';\r\nimport DateRangeDialog from './DateRangeDialog';\r\nimport Fab from '@mui/material/Fab';\r\nimport NavigateBeforeIcon from '@mui/icons-material/NavigateBefore';\r\nimport NavigateNextIcon from '@mui/icons-material/NavigateNext';\r\n\r\nmoment.locale('fr-FR');\r\n\r\nexport default function Calendrier(props) {\r\n  const { annee } = props;\r\n\r\n  const [mousePos, setMousePos] = React.useState({\r\n    mouseX: null,\r\n    mouseY: null,\r\n  });\r\n  const [activeMenu, setActiveMenu] = React.useState(false);\r\n\r\n  const [lignes, setLignes] = React.useState([]);\r\n\r\n  const [highlighted, setHighlighted] = React.useState(null);\r\n\r\n  const [conges, setConges] = React.useState([]);\r\n\r\n  const [clicked, setClicked] = React.useState(false);\r\n\r\n  const [startDateHighlight, setStartDateHighlight] = React.useState(null);\r\n\r\n  const [openDialog, setOpenDialog] = React.useState(false);\r\n\r\n  const [nbMonths, setNbMonths] = React.useState(\r\n    Math.floor(window.innerWidth / 117)\r\n  );\r\n\r\n  const [dateDebut, setDateDebut] = React.useState(moment([annee, 0, 1]));\r\n  const [dateFin, setDateFin] = React.useState(moment([annee, 6, 1]));\r\n\r\n  React.useEffect(() => {\r\n    const handleWindowResize = () => {\r\n      var newNbMonths = Math.floor(window.innerWidth / 117);\r\n      var newDateFin = dateDebut\r\n        .clone()\r\n        .add(Math.max(newNbMonths ?? 6, 2), 'months');\r\n\r\n      setNbMonths(newNbMonths);\r\n      setDateFin(newDateFin);\r\n    };\r\n\r\n    handleWindowResize();\r\n\r\n    window.addEventListener('resize', handleWindowResize);\r\n    return () => window.removeEventListener('resize', handleWindowResize);\r\n  }, []);\r\n\r\n  const zone = 'C';\r\n\r\n  const MenuOptions = [\r\n    { menu: 'Congés', abr: 'CA', type: 'conge' },\r\n    { menu: 'RTT', abr: 'RTT', type: 'conge' },\r\n    { menu: 'Formation', abr: 'FOR', type: 'conge' },\r\n    { menu: 'Maladie', abr: 'MAL', type: 'conge' },\r\n    { menu: 'Présent', abr: '', type: 'conge' },\r\n    { menu: 'Télétravail', abr: 'TL', type: 'conge' },\r\n    { menu: 'Divider', abr: '', type: 'separateur' },\r\n    { menu: 'Journée', abr: 'J', type: 'temps' },\r\n    { menu: 'Matin', abr: 'AM', type: 'temps' },\r\n    { menu: 'Après-midi', abr: 'PM', type: 'temps' },\r\n  ];\r\n\r\n  const handleDescrClose = () => {\r\n    setActiveMenu(false);\r\n  };\r\n\r\n  const onClick = React.useCallback(\r\n    (event, myDate) => {\r\n      event.preventDefault();\r\n\r\n      if (!clicked) {\r\n        setStartDateHighlight(myDate);\r\n        setHighlighted(moment.range(myDate, myDate));\r\n      } else {\r\n        setHighlighted(\r\n          moment.range(\r\n            moment.min(startDateHighlight, myDate),\r\n            moment.max(startDateHighlight, myDate)\r\n          )\r\n        );\r\n        setMousePos({\r\n          mouseX: event.clientX - 2,\r\n          mouseY: event.clientY - 4,\r\n        });\r\n        setActiveMenu(true);\r\n      }\r\n      setClicked(!clicked);\r\n    },\r\n    [clicked]\r\n  );\r\n\r\n  function onContextMenu(event) {\r\n    event.preventDefault();\r\n    setMousePos({\r\n      mouseX: event.clientX - 2,\r\n      mouseY: event.clientY - 4,\r\n    });\r\n    setActiveMenu(true);\r\n  }\r\n\r\n  const handleMenuItemClick = (event, abr, type) => {\r\n    event.preventDefault();\r\n    //console.log(highlighted);\r\n    var newConges = handleNewConge(abr, type, conges, highlighted);\r\n    setConges(newConges);\r\n    setActiveMenu(false);\r\n    setHighlighted(null);\r\n  };\r\n\r\n  function getLignes(index) {\r\n    const result = [];\r\n\r\n    Array.from(\r\n      moment\r\n        .range(dateDebut, dateDebut.clone().add(nbMonths, 'months'))\r\n        .by('month')\r\n    ).map((month) => {\r\n      let myDate = moment([month.year(), month.month(), index + 1]);\r\n\r\n      let isValidDate = myDate.isValid();\r\n\r\n      function CommonTableCellCalendrier(params) {\r\n        return (\r\n          <TableCellCalendrier\r\n            myDate={myDate}\r\n            highlighted={highlighted}\r\n            onContextMenu={onContextMenu}\r\n            onClick={onClick}\r\n            clicked={clicked}\r\n            conges={conges}\r\n            {...params}\r\n          />\r\n        );\r\n      }\r\n\r\n      function tableCellConge() {\r\n        let conge = conges?.find(\r\n          (item) => item.date === myDate.format('YYYY-MM-DD')\r\n        );\r\n\r\n        if (!conge) {\r\n          return (\r\n            <CommonTableCellCalendrier\r\n              colSpan={2}\r\n              type=\"sansConge\"\r\n              duree=\"J\"\r\n              abr={conge?.abr}\r\n            />\r\n          );\r\n        }\r\n\r\n        if (conge.duree === 'J')\r\n          return (\r\n            <CommonTableCellCalendrier\r\n              colSpan={2}\r\n              type=\"journeeConge\"\r\n              duree=\"J\"\r\n              abr={conge?.abr}\r\n              children={conge?.abr}\r\n            />\r\n          );\r\n        else\r\n          return (\r\n            <>\r\n              <CommonTableCellCalendrier\r\n                type={\r\n                  conge.duree === 'AM'\r\n                    ? 'demiJourneeConge'\r\n                    : 'demiJourneeSansConge'\r\n                }\r\n                duree=\"AM\"\r\n                abr={conge?.abr}\r\n                children={conge.duree === 'AM' && conge.abr}\r\n              />\r\n\r\n              <CommonTableCellCalendrier\r\n                type={\r\n                  conge.duree === 'PM'\r\n                    ? 'demiJourneeConge'\r\n                    : 'demiJourneeSansConge'\r\n                }\r\n                duree=\"PM\"\r\n                abr={conge?.abr}\r\n                children={conge.duree === 'PM' && conge.abr}\r\n              />\r\n            </>\r\n          );\r\n      }\r\n\r\n      result.push(\r\n        // Numéro du jour\r\n        <React.Fragment\r\n          key={'ligne' + index + 'i' + month.year() + month.month()}\r\n        >\r\n          <CommonTableCellCalendrier\r\n            type=\"date\"\r\n            children={\r\n              isValidDate &&\r\n              myDate.format('DD') + ' ' + myDate.format('dd')[0].toUpperCase()\r\n            }\r\n          />\r\n\r\n          {tableCellConge()}\r\n\r\n          {/* Vacances scolaires */}\r\n          <TableCell\r\n            sx={{\r\n              ...(isValidDate\r\n                ? estVacances(myDate, zone)\r\n                  ? StyleTableCell.maZone\r\n                  : estVacances(myDate, 'A') || estVacances(myDate, 'B')\r\n                  ? StyleTableCell.autresZones\r\n                  : StyleTableCell.vacances\r\n                : StyleTableCell.vacances),\r\n            }}\r\n          />\r\n        </React.Fragment>\r\n      );\r\n    });\r\n    return result;\r\n  }\r\n\r\n  React.useEffect(() => {\r\n    let newLigne = [];\r\n\r\n    for (let i = 0; i < 31; i++)\r\n      newLigne = [\r\n        ...newLigne,\r\n        <TableRow key={'ligne' + i}>{getLignes(i)}</TableRow>,\r\n      ];\r\n\r\n    setLignes(newLigne);\r\n  }, [clicked, conges, dateDebut, nbMonths]);\r\n\r\n  React.useEffect(() => {\r\n    getApiData().then((data) => setConges(data));\r\n  }, []);\r\n\r\n  function NbMonthByYear(oneRange, year) {\r\n    //console.log('NbMonthByYear');\r\n    //console.log(JSON.stringify(oneRange));\r\n    //console.log(year);\r\n    var rangeFullYear = moment.range(\r\n      moment([year, 0, 1]),\r\n      moment([year, 11, 31])\r\n    );\r\n    //console.log(JSON.stringify(rangeFullYear));\r\n    var result = 0;\r\n\r\n    var rangeYear = rangeFullYear.intersect(oneRange);\r\n    //console.log(JSON.stringify(rangeYear));\r\n    //console.log(rangeFullYear.adjacent(oneRange));\r\n\r\n    if (!rangeYear) result = rangeFullYear.adjacent(oneRange) && 1;\r\n    else result = Array.from(rangeYear.by('month')).length;\r\n    //console.log(result);\r\n\r\n    return result;\r\n  }\r\n\r\n  return (\r\n    <div>\r\n      <Typography variant=\"h5\" align=\"center\">Congés</Typography><br/>\r\n      <Fab\r\n        color=\"primary\"\r\n        size=\"small\"\r\n        sx={{\r\n          position: 'absolute',\r\n          top: 5,\r\n          left: 5,\r\n        }}\r\n        onClick={() => {\r\n          setDateDebut(dateDebut.clone().add(-1, 'months'));\r\n        }}\r\n      >\r\n        <NavigateBeforeIcon />\r\n      </Fab>\r\n      <Fab\r\n        color=\"primary\"\r\n        size=\"small\"\r\n        sx={{\r\n          position: 'absolute',\r\n          top: 5,\r\n          right: 5,\r\n        }}\r\n        onClick={() => {\r\n          setDateDebut(dateDebut.clone().add(1, 'months'));\r\n        }}\r\n      >\r\n        <NavigateNextIcon />\r\n      </Fab>\r\n      <TableContainer component={Paper} style={{ width: 'fit-content' }}>\r\n        <Table style={{ borderCollapse: 'separate' }}>\r\n          <TableBody>\r\n            <TableRow>\r\n              {Array.from(\r\n                moment\r\n                  .range(dateDebut, dateDebut.clone().add(nbMonths, 'months'))\r\n                  .snapTo('year')\r\n                  .by('year')\r\n              ).map((years) => (\r\n                <React.Fragment key={years.format('YYYY')}>\r\n                  <TableCell\r\n                    sx={{ ...StyleTableCell.annee }}\r\n                    colSpan={\r\n                      4 *\r\n                      NbMonthByYear(\r\n                        moment.range(\r\n                          dateDebut,\r\n                          dateDebut.clone().add(nbMonths, 'months')\r\n                        ),\r\n                        years.year()\r\n                      )\r\n                    }\r\n                    onClick={() => setOpenDialog(true)}\r\n                  >\r\n                    {years.format('YYYY')}\r\n                  </TableCell>\r\n                </React.Fragment>\r\n              ))}\r\n            </TableRow>\r\n            <TableRow>\r\n              {Array.from(\r\n                moment\r\n                  .range(dateDebut, dateDebut.clone().add(nbMonths, 'months'))\r\n                  .by('month')\r\n              ).map((month) => (\r\n                <React.Fragment key={month.format('YYYY-M')}>\r\n                  <TableCell sx={{ ...StyleTableCell.mois }} colSpan={4}>\r\n                    {month.locale('fr-FR').format('MMMM')}\r\n                  </TableCell>\r\n                </React.Fragment>\r\n              ))}\r\n            </TableRow>\r\n            {lignes}\r\n          </TableBody>\r\n        </Table>\r\n      </TableContainer>\r\n      <Menu\r\n        keepMounted\r\n        open={activeMenu}\r\n        onClose={handleDescrClose}\r\n        anchorReference=\"anchorPosition\"\r\n        anchorPosition={\r\n          mousePos.mouseY !== null && mousePos.mouseX !== null\r\n            ? { top: mousePos.mouseY, left: mousePos.mouseX }\r\n            : undefined\r\n        }\r\n      >\r\n        {MenuOptions.map((option) => {\r\n          var result;\r\n          if (option.menu === 'Divider') result = <Divider />;\r\n          else\r\n            result = (\r\n              <MenuItem\r\n                key={option.menu}\r\n                sx={{ fontSize: '0.8em', lineHeight: '1' }}\r\n                onClick={(event) =>\r\n                  handleMenuItemClick(event, option.abr, option.type)\r\n                }\r\n              >\r\n                {option.menu}\r\n              </MenuItem>\r\n            );\r\n          return result;\r\n        })}\r\n      </Menu>\r\n      {openDialog && (\r\n        <DateRangeDialog\r\n          dateDebut={dateDebut}\r\n          handleClose={(result, dateMin) => {\r\n            setOpenDialog(false);\r\n            if (result) {\r\n              setDateDebut(dateMin);\r\n            }\r\n          }}\r\n        />\r\n      )}\r\n    </div>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}